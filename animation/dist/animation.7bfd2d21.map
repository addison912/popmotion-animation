{"version":3,"sources":["node_modules/tslib/tslib.es6.js","node_modules/hey-listen/dist/hey-listen.es.js","../../../../usr/local/lib/node_modules/parcel-bundler/node_modules/process/browser.js","node_modules/framesync/dist/framesync.es.js","node_modules/style-value-types/dist/style-value-types.es.js","node_modules/@popmotion/easing/dist/easing.es.js","node_modules/stylefire/dist/stylefire.es.js","node_modules/popmotion/dist/popmotion.es.js","animation.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__await","__asyncGenerator","asyncIterator","q","a","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","k","default","__importDefault","HEY_LISTEN","warning","invariant","check","message","console","warn","Error","toUpperCase","process","module","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","nextTick","args","Item","array","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","prevTime","onNextFrame","window","requestAnimationFrame","undefined","callback","timestamp","Date","now","timeToCall","Math","max","createStep","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","isProcessing","cancelled","WeakSet","toKeepAlive","renderStep","cancel","indexOfCallback","add","splice","frame","_a","process_1","has","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","StepId","maxElapsed","defaultElapsed","useDefaultElapsed","willRunNextFrame","delta","stepsOrder","Read","Update","Render","PostRender","setWillRunNextFrame","willRun","reduce","acc","sync","startLoop","cancelSync","steps","processStep","stepId","processFrame","min","forEach","getFrameData","clamp","isFirstChars","term","getValueFromFunctionString","substring","lastIndexOf","splitCommaDelimited","split","sanitize","Number","toFixed","number","test","parse","parseFloat","transform","alpha","scale","createUnitType","unit","endsWith","degrees","percent","px","vh","vw","clampRgbUnit","onlyColorRegex","isRgba","red","isHsla","hue","splitColorValues","terms","numTerms","values","valuesArray","rgbaTemplate","green","blue","_b","alpha$$1","hslaTemplate","saturation","lightness","rgbUnit","round","testRgbaString","rgba","testHslaString","hsla","hex","substr","parseInt","color","floatRegex","colorRegex","COLOR_TOKEN","NUMBER_TOKEN","complex","isNaN","numValues","foundNumbers","match","foundColors","input","parsed","replace","map","createTransformer","prop","template","token","numColors","numNumbers","output","DEFAULT_OVERSHOOT_STRENGTH","reversed","easing","mirrored","createReversedEasing","createMirroredEasing","createExpoIn","power","pow","createBackIn","createAnticipateEasing","backEasing","linear","easeIn","easeOut","easeInOut","circIn","sin","acos","circOut","circInOut","backIn","backOut","backInOut","anticipate","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","K_SPLINE_TABLE_SIZE","K_SAMPLE_STEP_SIZE","FLOAT_32_SUPPORTED","Float32Array","a1","a2","getSlope","calcBezier","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","binarySubdivide","aX","aA","aB","currentX","currentT","abs","newtonRaphsonIterate","aGuessT","currentSlope","calcSampleValues","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","resolver","returnValue","createStyler","onRead","onRender","aliasMap","_c","useCache","props","state","changedValues","hasChanged","setValue","unmappedKey","currentValue","render","forceRender","get","set","CAMEL_CASE_PATTERN","REPLACE_TEMPLATE","camelToDash","str","toLowerCase","setDomAttrs","element","attrs","setAttribute","camelCache","Map","dashCache","prefixes","numPrefixes","testElement","testPrefix","document","createElement","prefix","noPrefix","prefixedPropertyName","charAt","slice","style","prefixer","asDashCase","cache","axes","order","TRANSFORM_ORIGIN_X","TRANSFORM_ORIGIN_Y","transformProps","axesAcc","axesKey","transformPropDictionary","dict","isTransformProp","sortTransformProps","isTransformOriginProp","valueTypes","backgroundColor","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderRadius","width","maxWidth","height","maxHeight","top","left","bottom","right","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","opacity","transformOriginX","transformOriginY","transformOriginZ","getValueType","x","z","originX","originY","originZ","NUMBER","OBJECT","COLON","SEMI_COLON","TRANSFORM_ORIGIN","TRANSFORM","TRANSLATE_Z","TRANSFORM_NONE","styleRule","buildStylePropertyString","enableHardwareAcceleration","blacklist","valuesToChange","keys","propertyString","transformString","hasTransformOrigin","transformIsDefault","hasTransform","transformHasZ","numChangedValues","stateKey","sort","totalNumChangedValues","isTransformKey","valueType","SCROLL_LEFT","SCROLL_TOP","scrollValues","Set","cssStyler","preparseOutput","domValue","getComputedStyle","getPropertyValue","cssText","scrollLeft","scrollTop","uncachedValues","css","ZERO_NOT_ZERO","percentToPixels","percent$$1","build","dimensions","isPath","pathLength","hasDashArray","dashArrayStyles","pathSpacing","scale$$1","scaleTransformX","scaleTransformY","scaleReplaceX","scaleReplaceY","translate","defaultValue","valueTypes$1","fillOpacity","strokeOpacity","getValueType$1","svgStyler","getAttribute","background","svg","getBBox","tagName","getTotalLength","viewport","pageYOffset","pageXOffset","scrollTo","WeakMap","createDOMStyler","node","styler","HTMLElement","SVGElement","getStyler","index","nodeOrSelector","querySelector","isNum","isPoint","point","isPoint3D","toDecimal","num","precision","ZERO_POINT","distance1D","angle","radiansToDegrees","atan2","degreesToRadians","degrees$$1","PI","dilate","dilation","xDelta","yDelta","zDelta","sqrt","getProgressFromValue","from","to","toFromDifference","getValueFromProgress","progress","pointFromAngleAndDistance","origin","cos","radians","smooth","newValue","oldValue","duration","smoothing","speedPerFrame","xps","frameDuration","speedPerSecond","velocity","stepProgress","segment","subsegment","percentProgressOfTarget","subsegmentProgressOfTarget","segmentProgressOfTarget","floor","calc","freeze","identity","appendUnit","applyOffset","hasReceivedFrom","getOffset","applyOffsetTo","blend","fromExpo","toExpo","blendColor","fromColor","toColor","blended","blendFunc","blendArray","blendValue","fromThis","toThis","combineFunctions","pipe","transformers","_i","conditional","slowInterpolate","rangeLength","rangeEasing","finalIndex","reverse","progressInRange","easedProgress","fastInterpolate","minA","maxA","minB","maxB","interpolate","generateStaticSpring","alterDisplacement","constant","displacement","springModifiedDisplacement","linearSpring","nonlinearSpring","wrap","rangeSize","smooth$1","strength","previousValue","lastUpdated","currentFramestamp","timeDelta","snap","points","i_1","numPoints_1","lastDistance","distance$$1","st","transformMap","childTransformers","childTransformer","Chainable","applyMiddleware","middleware","funcs","pipedUpdate","update","while","predicate","complete","filter","Observer","observer","onComplete","_this","isActive","updateObserver","err","createObserver","observerCandidate","Action","_super","start","isComplete","subscription","stop","init","observerProps","api","registerParent","action","BaseMulticast","subscribers","subscriber","subscribe","unsubscribe","parent","Multicast","multicast","isValueList","isArray","isSingleValue","typeOfV","ValueReaction","scheduleVelocityCheck","postRender","velocityCheck","prev","current","updateCurrent","getVelocityOfCurrent","getSingleVelocity","getListVelocity","getMapVelocity","initialSubscription","getVelocity","sub","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","updateOutput","numCompletedActions","subs","hasCompleted","methodName","composite","propKey","starter","parallel","parallel$1","createVectorTests","typeTests","testNames","isVectorProp","getVectorKeys","vectorKeys","testVectorProps","some","unitTypes","findUnitType","find","type","isUnitProp","Boolean","createAction","reduceArrayValue","createArrayAction","firstVectorKey","actionList","childActionProps","getActionCreator","reduceObjectValue","createObjectAction","actionMap","createUnitAction","unitType","createColorAction","createComplexAction","valueTemplate","createVectorAction","vectorAction","isVector","testKey","testProp","actionCreator","decay","_d","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","frameDelta","exp","isMoving","vectorDecay","func","initialTime","scrubber","ease","seek","vectorScrubber","clampProgress","tween","flip","loop","yoyo","_g","_h","_j","_k","playDirection","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","reverseTween","isTweenComplete","isStepTaken","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","newProgress","clampProgress$1","defaultEasings","easing$$1","defaultTimings","interpolateScrubbers","scrubbers","finalInputIndex","finalScrubberIndex","scrub","keyframes","easings","times","tweenProps","physics","acceleration","friction","springStrength","restSpeed","distanceToTarget","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","spring","stiffness","damping","mass","initialVelocity","position","prevPosition","dampingRatio","angularFreq","envelope","expoDecay","isBelowVelocityThreshold","isBelowDisplacementThreshold","vectorSpring","DEFAULT_DURATION","flattenTimings","instructions","flatInstructions","lastArg","isStaggered","staggerDelay","segments","numSegments","offset","item","flattenArrayInstructions","instruction","convertDefToProps","def","prevTimeTo","timeFrom","at","timeTo","timeline","calculatedDuration","animationDefs","tracks","numDefs","track","trackKeyframes","keyframeProps","listen","events","options","eventNames","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","eventToPoint","isTouchDevice","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","crossfade","balance","fadable","va","vb","setBalance","delay","timeToDelay","merge","thisAction","scheduler","schedulee","latest","schedulerSub","scheduleeSub","stagger","interval","intervalIsNumber","actionsWithDelay","ball","divStyler","ballXY"],"mappings":"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","file":"animation.7bfd2d21.map","sourceRoot":"..","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","var HEY_LISTEN = 'Hey, listen! ';\r\nvar warning = function () { };\r\nvar invariant = function () { };\r\nif (process.env.NODE_ENV !== 'production') {\r\n    warning = function (check, message) {\r\n        if (!check && typeof console !== 'undefined') {\r\n            console.warn(HEY_LISTEN + message);\r\n        }\r\n    };\r\n    invariant = function (check, message) {\r\n        if (!check) {\r\n            throw new Error(HEY_LISTEN.toUpperCase() + message);\r\n        }\r\n    };\r\n}\n\nexport { warning, invariant };\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar isProcessing = false;\r\nvar frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar _a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = _a.steps, sync = _a.sync, cancelSync = _a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = frame.delta;\r\n    frame.timestamp = timestamp;\r\n    isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return frame; };\n\nexport default sync;\nexport { cancelSync, getFrameData };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar isFirstChars = function (term) { return function (v) {\r\n    return typeof v === 'string' && v.indexOf(term) === 0;\r\n}; };\r\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar splitCommaDelimited = function (value) {\r\n    return typeof value === 'string' ? value.split(/,\\s*/) : [value];\r\n};\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = __assign({}, number, { transform: clamp(0, 1) });\r\nvar scale = __assign({}, number, { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\n\nvar clampRgbUnit = clamp(0, 255);\r\nvar onlyColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nvar splitColorValues = function (terms) {\r\n    var numTerms = terms.length;\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = splitCommaDelimited(getValueFromFunctionString(v));\r\n        for (var i = 0; i < numTerms; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\r\n};\r\nvar rgbUnit = __assign({}, number, { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nvar testRgbaString = isFirstChars('rgb');\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? testRgbaString(v) : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, alpha$$1 = _a.alpha;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha$$1)\r\n        });\r\n    }\r\n};\r\nvar testHslaString = isFirstChars('hsl');\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? testHslaString(v) : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, alpha$$1 = _a.alpha;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha$$1)\r\n        });\r\n    }\r\n};\r\nvar hex = __assign({}, rgba, { test: isFirstChars('#'), parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && onlyColorRegex.test(v)) ||\r\n            rgba.test(v) ||\r\n            hsla.test(v) ||\r\n            hex.test(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\r\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    }\r\n};\n\nexport { number, scale, alpha, degrees, percent, px, vw, vh, rgba, rgbUnit, hex, hsla, color, complex };\n","var DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar reversed = function (easing) {\n    return function (p) {\n        return 1 - easing(1 - p);\n    };\n};\nvar mirrored = function (easing) {\n    return function (p) {\n        return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n    };\n};\nvar createReversedEasing = reversed;\nvar createMirroredEasing = mirrored;\nvar createExpoIn = function (power) {\n    return function (p) {\n        return Math.pow(p, power);\n    };\n};\nvar createBackIn = function (power) {\n    return function (p) {\n        return p * p * ((power + 1) * p - power);\n    };\n};\nvar createAnticipateEasing = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\nvar linear = function (p) {\n    return p;\n};\nvar easeIn = /*#__PURE__*/createExpoIn(2);\nvar easeOut = /*#__PURE__*/reversed(easeIn);\nvar easeInOut = /*#__PURE__*/mirrored(easeIn);\nvar circIn = function (p) {\n    return 1 - Math.sin(Math.acos(p));\n};\nvar circOut = /*#__PURE__*/reversed(circIn);\nvar circInOut = /*#__PURE__*/mirrored(circOut);\nvar backIn = /*#__PURE__*/createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = /*#__PURE__*/reversed(backIn);\nvar backInOut = /*#__PURE__*/mirrored(backIn);\nvar anticipate = /*#__PURE__*/createAnticipateEasing(DEFAULT_OVERSHOOT_STRENGTH);\nvar NEWTON_ITERATIONS = 8;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar K_SPLINE_TABLE_SIZE = 11;\nvar K_SAMPLE_STEP_SIZE = 1.0 / (K_SPLINE_TABLE_SIZE - 1.0);\nvar FLOAT_32_SUPPORTED = typeof Float32Array !== 'undefined';\nvar a = function (a1, a2) {\n    return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\nvar b = function (a1, a2) {\n    return 3.0 * a2 - 6.0 * a1;\n};\nvar c = function (a1) {\n    return 3.0 * a1;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\nvar calcBezier = function (t, a1, a2) {\n    return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    var sampleValues = FLOAT_32_SUPPORTED ? new Float32Array(K_SPLINE_TABLE_SIZE) : new Array(K_SPLINE_TABLE_SIZE);\n    var binarySubdivide = function (aX, aA, aB) {\n        var i = 0;\n        var currentX;\n        var currentT;\n        do {\n            currentT = aA + (aB - aA) / 2.0;\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\n            if (currentX > 0.0) {\n                aB = currentT;\n            } else {\n                aA = currentT;\n            }\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n        return currentT;\n    };\n    var newtonRaphsonIterate = function (aX, aGuessT) {\n        var i = 0;\n        var currentSlope = 0;\n        var currentX;\n        for (; i < NEWTON_ITERATIONS; ++i) {\n            currentSlope = getSlope(aGuessT, mX1, mX2);\n            if (currentSlope === 0.0) {\n                return aGuessT;\n            }\n            currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n            aGuessT -= currentX / currentSlope;\n        }\n        return aGuessT;\n    };\n    var calcSampleValues = function () {\n        for (var i = 0; i < K_SPLINE_TABLE_SIZE; ++i) {\n            sampleValues[i] = calcBezier(i * K_SAMPLE_STEP_SIZE, mX1, mX2);\n        }\n    };\n    var getTForX = function (aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = K_SPLINE_TABLE_SIZE - 1;\n        var dist = 0.0;\n        var guessForT = 0.0;\n        var initialSlope = 0.0;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += K_SAMPLE_STEP_SIZE;\n        }\n        --currentSample;\n        dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        guessForT = intervalStart + dist * K_SAMPLE_STEP_SIZE;\n        initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n            return newtonRaphsonIterate(aX, guessForT);\n        } else if (initialSlope === 0.0) {\n            return guessForT;\n        } else {\n            return binarySubdivide(aX, intervalStart, intervalStart + K_SAMPLE_STEP_SIZE);\n        }\n    };\n    calcSampleValues();\n    var resolver = function (aX) {\n        var returnValue;\n        if (mX1 === mY1 && mX2 === mY2) {\n            returnValue = aX;\n        } else if (aX === 0) {\n            returnValue = 0;\n        } else if (aX === 1) {\n            returnValue = 1;\n        } else {\n            returnValue = calcBezier(getTForX(aX), mY1, mY2);\n        }\n        return returnValue;\n    };\n    return resolver;\n}\n\nexport { reversed, mirrored, createReversedEasing, createMirroredEasing, createExpoIn, createBackIn, createAnticipateEasing, linear, easeIn, easeOut, easeInOut, circIn, circOut, circInOut, backIn, backOut, backInOut, anticipate, cubicBezier };\n","import sync from 'framesync';\nimport { alpha, color, degrees, scale, px, percent } from 'style-value-types';\nimport { __assign } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.aliasMap,\n        aliasMap = _b === void 0 ? {} : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (props) {\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        var setValue = function (unmappedKey, value) {\n            var key = aliasMap[unmappedKey] || unmappedKey;\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] !== currentValue) {\n                if (changedValues.indexOf(key) === -1) {\n                    changedValues.push(key);\n                }\n                if (!hasChanged) {\n                    hasChanged = true;\n                    sync.render(render);\n                }\n            }\n        };\n        function render(forceRender) {\n            if (forceRender === void 0) {\n                forceRender = false;\n            }\n            if (forceRender === true || hasChanged) {\n                onRender(state, props, changedValues);\n                hasChanged = false;\n                changedValues.length = 0;\n            }\n            return this;\n        }\n        return {\n            get: function (unmappedKey) {\n                var key = aliasMap[unmappedKey] || unmappedKey;\n                return key ? useCache && state[key] !== undefined ? state[key] : onRead(key, props) : state;\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    if (value !== undefined) {\n                        setValue(values, value);\n                    } else {\n                        return function (v) {\n                            return setValue(values, v);\n                        };\n                    }\n                } else {\n                    for (var key in values) {\n                        if (values.hasOwnProperty(key)) {\n                            setValue(key, values[key]);\n                        }\n                    }\n                }\n                return this;\n            },\n            render: render\n        };\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nvar setDomAttrs = function (element, attrs) {\n    for (var key in attrs) {\n        if (attrs.hasOwnProperty(key)) {\n            element.setAttribute(key, attrs[key]);\n        }\n    }\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar testElement;\nvar testPrefix = function (key) {\n    if (typeof document === 'undefined') return;\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style) {\n            camelCache.set(key, prefixedPropertyName);\n            dashCache.set(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) testPrefix(key);\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar TRANSFORM_ORIGIN_X = 'transformOriginX';\nvar TRANSFORM_ORIGIN_Y = 'transformOriginY';\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nvar isTransformProp = function (key) {\n    return transformPropDictionary[key] === true;\n};\nvar sortTransformProps = function (a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n};\nvar isTransformOriginProp = function (key) {\n    return key === TRANSFORM_ORIGIN_X || key === TRANSFORM_ORIGIN_Y;\n};\n\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    top: px,\n    left: px,\n    bottom: px,\n    right: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    perspective: px,\n    opacity: alpha,\n    transformOriginX: percent,\n    transformOriginY: percent,\n    transformOriginZ: px\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\n\nvar aliasMap = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ',\n    originX: 'transformOriginX',\n    originY: 'transformOriginY',\n    originZ: 'transformOriginZ'\n};\nvar NUMBER = 'number';\nvar OBJECT = 'object';\nvar COLON = ':';\nvar SEMI_COLON = ';';\nvar TRANSFORM_ORIGIN = 'transform-origin';\nvar TRANSFORM = 'transform';\nvar TRANSLATE_Z = 'translateZ';\nvar TRANSFORM_NONE = ';transform: none';\nvar styleRule = function (key, value) {\n    return \"\" + SEMI_COLON + key + COLON + value;\n};\nfunction buildStylePropertyString(state, changedValues, enableHardwareAcceleration, blacklist) {\n    if (changedValues === void 0) {\n        changedValues = true;\n    }\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    var valuesToChange = changedValues === true ? Object.keys(state) : changedValues;\n    var propertyString = '';\n    var transformString = '';\n    var hasTransformOrigin = false;\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var transformHasZ = false;\n    var numChangedValues = valuesToChange.length;\n    for (var i = 0; i < numChangedValues; i++) {\n        var key = valuesToChange[i];\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            for (var stateKey in state) {\n                if (isTransformProp(stateKey) && valuesToChange.indexOf(stateKey) === -1) {\n                    valuesToChange.push(stateKey);\n                }\n            }\n            break;\n        }\n    }\n    valuesToChange.sort(sortTransformProps);\n    var totalNumChangedValues = valuesToChange.length;\n    for (var i = 0; i < totalNumChangedValues; i++) {\n        var key = valuesToChange[i];\n        if (blacklist.has(key)) continue;\n        var isTransformKey = isTransformProp(key);\n        var value = state[key];\n        var valueType = getValueType(key);\n        if (isTransformKey) {\n            if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                transformIsDefault = false;\n            }\n        }\n        if (valueType && (typeof value === NUMBER || typeof value === OBJECT) && valueType.transform) {\n            value = valueType.transform(value);\n        }\n        if (isTransformKey) {\n            transformString += key + '(' + value + ') ';\n            transformHasZ = key === TRANSLATE_Z ? true : transformHasZ;\n        } else if (isTransformOriginProp(key)) {\n            state[key] = value;\n            hasTransformOrigin = true;\n        } else {\n            propertyString += styleRule(prefixer(key, true), value);\n        }\n    }\n    if (hasTransformOrigin) {\n        propertyString += styleRule(TRANSFORM_ORIGIN, (state.transformOriginX || 0) + \" \" + (state.transformOriginY || 0) + \" \" + (state.transformOriginZ || 0));\n    }\n    if (hasTransform) {\n        if (!transformHasZ && enableHardwareAcceleration) {\n            transformString += TRANSLATE_Z + \"(0)\";\n        }\n        propertyString += styleRule(TRANSFORM, transformIsDefault ? TRANSFORM_NONE : transformString);\n    }\n    return propertyString;\n}\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollValues = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element,\n            preparseOutput = _a.preparseOutput;\n        var valueType = getValueType(key);\n        if (isTransformProp(key)) {\n            return valueType ? valueType.default || 0 : 0;\n        } else if (scrollValues.has(key)) {\n            return element[key];\n        } else {\n            var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n            return preparseOutput && valueType && valueType.parse ? valueType.parse(domValue) : domValue;\n        }\n    },\n    onRender: function (state, _a, changedValues) {\n        var element = _a.element,\n            enableHardwareAcceleration = _a.enableHardwareAcceleration;\n        element.style.cssText += buildStylePropertyString(state, changedValues, enableHardwareAcceleration, scrollValues);\n        if (changedValues.indexOf(SCROLL_LEFT) !== -1) element.scrollLeft = state.scrollLeft;\n        if (changedValues.indexOf(SCROLL_TOP) !== -1) element.scrollTop = state.scrollTop;\n    },\n    aliasMap: aliasMap,\n    uncachedValues: scrollValues\n});\nvar css = function (element, props) {\n    return cssStyler(__assign({ element: element, enableHardwareAcceleration: true, preparseOutput: true }, props));\n};\n\nvar ZERO_NOT_ZERO = 0.0000001;\nvar percentToPixels = function (percent$$1, length) {\n    return percent$$1 / 100 * length + 'px';\n};\nvar build = function (state, dimensions, isPath, pathLength) {\n    var hasTransform = false;\n    var hasDashArray = false;\n    var props = {};\n    var dashArrayStyles = isPath ? {\n        pathLength: '0',\n        pathSpacing: \"\" + pathLength\n    } : undefined;\n    var scale$$1 = state.scale !== undefined ? state.scale || ZERO_NOT_ZERO : state.scaleX || 1;\n    var scaleY = state.scaleY !== undefined ? state.scaleY || ZERO_NOT_ZERO : scale$$1 || 1;\n    var transformOriginX = dimensions.width * ((state.originX || 50) / 100) + dimensions.x;\n    var transformOriginY = dimensions.height * ((state.originY || 50) / 100) + dimensions.y;\n    var scaleTransformX = -transformOriginX * (scale$$1 * 1);\n    var scaleTransformY = -transformOriginY * (scaleY * 1);\n    var scaleReplaceX = transformOriginX / scale$$1;\n    var scaleReplaceY = transformOriginY / scaleY;\n    var transform = {\n        translate: \"translate(\" + state.translateX + \", \" + state.translateY + \") \",\n        scale: \"translate(\" + scaleTransformX + \", \" + scaleTransformY + \") scale(\" + scale$$1 + \", \" + scaleY + \") translate(\" + scaleReplaceX + \", \" + scaleReplaceY + \") \",\n        rotate: \"rotate(\" + state.rotate + \", \" + transformOriginX + \", \" + transformOriginY + \") \",\n        skewX: \"skewX(\" + state.skewX + \") \",\n        skewY: \"skewY(\" + state.skewY + \") \"\n    };\n    for (var key in state) {\n        if (state.hasOwnProperty(key)) {\n            var value = state[key];\n            if (isTransformProp(key)) {\n                hasTransform = true;\n            } else if (isPath && (key === 'pathLength' || key === 'pathSpacing') && typeof value === 'number') {\n                hasDashArray = true;\n                dashArrayStyles[key] = percentToPixels(value, pathLength);\n            } else if (isPath && key === 'pathOffset') {\n                props['stroke-dashoffset'] = percentToPixels(-value, pathLength);\n            } else {\n                props[camelToDash(key)] = value;\n            }\n        }\n    }\n    if (hasDashArray) {\n        props['stroke-dasharray'] = dashArrayStyles.pathLength + ' ' + dashArrayStyles.pathSpacing;\n    }\n    if (hasTransform) {\n        props.transform = '';\n        for (var key in transform) {\n            if (transform.hasOwnProperty(key)) {\n                var defaultValue = key === 'scale' ? '1' : '0';\n                props.transform += transform[key].replace(/undefined/g, defaultValue);\n            }\n        }\n    }\n    return props;\n};\n\nvar valueTypes$1 = {\n    fill: color,\n    stroke: color,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    opacity: alpha,\n    fillOpacity: alpha,\n    strokeOpacity: alpha\n};\nvar getValueType$1 = function (key) {\n    return valueTypes$1[key];\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType$1(key);\n            return valueType ? valueType.default : 0;\n        }\n    },\n    onRender: function (state, _a, changedValues) {\n        var dimensions = _a.dimensions,\n            element = _a.element,\n            isPath = _a.isPath,\n            pathLength = _a.pathLength;\n        setDomAttrs(element, build(state, dimensions, isPath, pathLength));\n    },\n    aliasMap: {\n        x: 'translateX',\n        y: 'translateY',\n        background: 'fill'\n    }\n});\nvar svg = function (element) {\n    var _a = element.getBBox(),\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n    var props = {\n        element: element,\n        dimensions: { x: x, y: y, width: width, height: height },\n        isPath: false\n    };\n    if (element.tagName === 'path') {\n        props.isPath = true;\n        props.pathLength = element.getTotalLength();\n    }\n    return svgStyler(props);\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node instanceof HTMLElement) {\n        styler = css(node, props);\n    } else if (node instanceof SVGElement) {\n        styler = svg(node);\n    } else if (typeof window !== 'undefined' && node === window) {\n        styler = viewport(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nexport default index;\nexport { createStyler as createStylerFactory, buildStylePropertyString as buildStyles };\n","import { __rest, __extends, __assign } from 'tslib';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport * as styleValueTypes from 'style-value-types';\nimport { color, hsla, complex, percent, degrees, vh, vw, px, number } from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport { invariant, warning } from 'hey-listen';\nimport * as easing from '@popmotion/easing';\nimport { linear, easeOut, easeInOut } from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\n\nvar isNum = function (v) {\n    return typeof v === 'number';\n};\nvar isPoint = function (point) {\n    return point.x !== undefined && point.y !== undefined;\n};\nvar isPoint3D = function (point) {\n    return point.z !== undefined;\n};\nvar toDecimal = function (num, precision) {\n    if (precision === void 0) {\n        precision = 2;\n    }\n    precision = Math.pow(10, precision);\n    return Math.round(num * precision) / precision;\n};\nvar ZERO_POINT = {\n    x: 0,\n    y: 0,\n    z: 0\n};\nvar distance1D = function (a, b) {\n    return Math.abs(a - b);\n};\nvar angle = function (a, b) {\n    if (b === void 0) {\n        b = ZERO_POINT;\n    }\n    return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\n};\nvar degreesToRadians = function (degrees$$1) {\n    return degrees$$1 * Math.PI / 180;\n};\nvar dilate = function (a, b, dilation) {\n    return a + (b - a) * dilation;\n};\nvar distance = function (a, b) {\n    if (b === void 0) {\n        b = ZERO_POINT;\n    }\n    if (isNum(a) && isNum(b)) {\n        return distance1D(a, b);\n    } else if (isPoint(a) && isPoint(b)) {\n        var xDelta = distance1D(a.x, b.x);\n        var yDelta = distance1D(a.y, b.y);\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n    }\n    return 0;\n};\nvar getProgressFromValue = function (from, to, value) {\n    var toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\nvar getValueFromProgress = function (from, to, progress) {\n    return -progress * from + progress * to + from;\n};\nvar pointFromAngleAndDistance = function (origin, angle, distance) {\n    angle = degreesToRadians(angle);\n    return {\n        x: distance * Math.cos(angle) + origin.x,\n        y: distance * Math.sin(angle) + origin.y\n    };\n};\nvar radiansToDegrees = function (radians) {\n    return radians * 180 / Math.PI;\n};\nvar smooth = function (newValue, oldValue, duration, smoothing) {\n    if (smoothing === void 0) {\n        smoothing = 0;\n    }\n    return toDecimal(oldValue + duration * (newValue - oldValue) / Math.max(smoothing, duration));\n};\nvar speedPerFrame = function (xps, frameDuration) {\n    return isNum(xps) ? xps / (1000 / frameDuration) : 0;\n};\nvar speedPerSecond = function (velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n};\nvar stepProgress = function (steps, progress) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    isPoint: isPoint,\n    isPoint3D: isPoint3D,\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    dilate: dilate,\n    distance: distance,\n    getProgressFromValue: getProgressFromValue,\n    getValueFromProgress: getValueFromProgress,\n    pointFromAngleAndDistance: pointFromAngleAndDistance,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smooth,\n    speedPerFrame: speedPerFrame,\n    speedPerSecond: speedPerSecond,\n    stepProgress: stepProgress\n});\n\nvar identity = function (v) {\n    return v;\n};\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar applyOffset = function (from, to) {\n    var hasReceivedFrom = true;\n    if (to === undefined) {\n        to = from;\n        hasReceivedFrom = false;\n    }\n    var getOffset = function (v) {\n        return v - from;\n    };\n    var applyOffsetTo = function (v) {\n        return v + to;\n    };\n    return function (v) {\n        if (hasReceivedFrom) {\n            return applyOffsetTo(getOffset(v));\n        } else {\n            from = v;\n            hasReceivedFrom = true;\n            return to;\n        }\n    };\n};\nvar blend = function (from, to, v) {\n    var fromExpo = from * from;\n    var toExpo = to * to;\n    return Math.sqrt(v * (toExpo - fromExpo) + fromExpo);\n};\nvar blendColor = function (from, to) {\n    var fromColor = typeof from === 'string' ? color.parse(from) : from;\n    var toColor = typeof to === 'string' ? color.parse(to) : to;\n    var blended = __assign({}, fromColor);\n    var blendFunc = from.hue !== undefined || typeof from === 'string' && hsla.test(from) ? getValueFromProgress : blend;\n    return function (v) {\n        blended = __assign({}, blended);\n        for (var key in blended) {\n            if (key !== 'alpha' && blended.hasOwnProperty(key)) {\n                blended[key] = blendFunc(fromColor[key], toColor[key], v);\n            }\n        }\n        blended.alpha = getValueFromProgress(fromColor.alpha, toColor.alpha, v);\n        return blended;\n    };\n};\nvar blendArray = function (from, to) {\n    var output = from.slice();\n    var numValues = output.length;\n    var blendValue = from.map(function (fromThis, i) {\n        var toThis = to[i];\n        return typeof fromThis === 'number' ? function (v) {\n            return getValueFromProgress(fromThis, toThis, v);\n        } : blendColor(fromThis, toThis);\n    });\n    return function (v) {\n        for (var i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nvar clamp = function (min, max) {\n    return function (v) {\n        return Math.min(Math.max(v, min), max);\n    };\n};\nvar combineFunctions = function (a, b) {\n    return function (v) {\n        return b(a(v));\n    };\n};\nvar pipe = function () {\n    var transformers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        transformers[_i] = arguments[_i];\n    }\n    return transformers.reduce(combineFunctions);\n};\nvar conditional = function (check, apply) {\n    return function (v) {\n        return check(v) ? apply(v) : v;\n    };\n};\nvar slowInterpolate = function (input, output, rangeLength, rangeEasing) {\n    var finalIndex = rangeLength - 1;\n    if (input[0] > input[finalIndex]) {\n        input.reverse();\n        output.reverse();\n    }\n    return function (v) {\n        if (v <= input[0]) {\n            return output[0];\n        }\n        if (v >= input[finalIndex]) {\n            return output[finalIndex];\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalIndex) {\n                break;\n            }\n        }\n        var progressInRange = getProgressFromValue(input[i - 1], input[i], v);\n        var easedProgress = rangeEasing ? rangeEasing[i - 1](progressInRange) : progressInRange;\n        return getValueFromProgress(output[i - 1], output[i], easedProgress);\n    };\n};\nvar fastInterpolate = function (minA, maxA, minB, maxB) {\n    return function (v) {\n        return (v - minA) * (maxB - minB) / (maxA - minA) + minB;\n    };\n};\nvar interpolate = function (input, output, rangeEasing) {\n    var rangeLength = input.length;\n    return rangeLength !== 2 ? slowInterpolate(input, output, rangeLength, rangeEasing) : fastInterpolate(input[0], input[1], output[0], output[1]);\n};\nvar generateStaticSpring = function (alterDisplacement) {\n    if (alterDisplacement === void 0) {\n        alterDisplacement = identity;\n    }\n    return function (constant, origin) {\n        return function (v) {\n            var displacement = origin - v;\n            var springModifiedDisplacement = -constant * (0 - alterDisplacement(Math.abs(displacement)));\n            return displacement <= 0 ? origin + springModifiedDisplacement : origin - springModifiedDisplacement;\n        };\n    };\n};\nvar linearSpring = /*#__PURE__*/generateStaticSpring();\nvar nonlinearSpring = /*#__PURE__*/generateStaticSpring(Math.sqrt);\nvar wrap = function (min, max) {\n    return function (v) {\n        var rangeSize = max - min;\n        return ((v - min) % rangeSize + rangeSize) % rangeSize + min;\n    };\n};\nvar smooth$1 = function (strength) {\n    if (strength === void 0) {\n        strength = 50;\n    }\n    var previousValue = 0;\n    var lastUpdated = 0;\n    return function (v) {\n        var currentFramestamp = getFrameData().timestamp;\n        var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\n        var newValue = timeDelta ? smooth(v, previousValue, timeDelta, strength) : previousValue;\n        lastUpdated = currentFramestamp;\n        previousValue = newValue;\n        return newValue;\n    };\n};\nvar snap = function (points) {\n    if (typeof points === 'number') {\n        return function (v) {\n            return Math.round(v / points) * points;\n        };\n    } else {\n        var i_1 = 0;\n        var numPoints_1 = points.length;\n        return function (v) {\n            var lastDistance = Math.abs(points[0] - v);\n            for (i_1 = 1; i_1 < numPoints_1; i_1++) {\n                var point = points[i_1];\n                var distance$$1 = Math.abs(point - v);\n                if (distance$$1 === 0) return point;\n                if (distance$$1 > lastDistance) return points[i_1 - 1];\n                if (i_1 === numPoints_1 - 1) return point;\n                lastDistance = distance$$1;\n            }\n        };\n    }\n};\nvar steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var progress = getProgressFromValue(min, max, v);\n        return getValueFromProgress(min, max, stepProgress(st, progress));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    appendUnit: appendUnit,\n    applyOffset: applyOffset,\n    blendColor: blendColor,\n    blendArray: blendArray,\n    clamp: clamp,\n    pipe: pipe,\n    conditional: conditional,\n    interpolate: interpolate,\n    generateStaticSpring: generateStaticSpring,\n    linearSpring: linearSpring,\n    nonlinearSpring: nonlinearSpring,\n    wrap: wrap,\n    smooth: smooth$1,\n    snap: snap,\n    steps: steps,\n    transformMap: transformMap\n});\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(Chainable);\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? speedPerSecond(current - prev, this.timeDelta) : speedPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createColorAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    return action(__assign({}, props, { from: 0, to: 1 })).pipe(blendColor(from, to), color.transform);\n};\nvar createComplexAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var valueTemplate = complex.createTransformer(from);\n    invariant(valueTemplate(from) === complex.createTransformer(to)(from), \"Values '\" + from + \"' and '\" + to + \"' are of different format, or a value might have changed value type.\");\n    return action(__assign({}, props, { from: 0, to: 1 })).pipe(blendArray(complex.parse(from), complex.parse(to)), valueTemplate);\n};\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    var actionCreator = createAction;\n    if (typeof prop === 'number') {\n        actionCreator = createAction;\n    } else if (Array.isArray(prop)) {\n        actionCreator = createArrayAction;\n    } else if (isUnitProp(prop)) {\n        actionCreator = createUnitAction;\n    } else if (color.test(prop)) {\n        actionCreator = createColorAction;\n    } else if (complex.test(prop)) {\n        actionCreator = createComplexAction;\n    } else if (typeof prop === 'object') {\n        actionCreator = createObjectAction;\n    }\n    return actionCreator;\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d;\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress) {\n                return update(progress);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return getValueFromProgress(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f;\n        var _g = props.from,\n            from = _g === void 0 ? 0 : _g,\n            _h = props.to,\n            to = _h === void 0 ? 1 : _h,\n            _j = props.elapsed,\n            elapsed = _j === void 0 ? 0 : _j,\n            _k = props.playDirection,\n            playDirection = _k === void 0 ? 1 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var progress = 0;\n        var process;\n        var isActive = false;\n        var reverseTween = function () {\n            return playDirection *= -1;\n        };\n        var isTweenComplete = function () {\n            var _a;\n            var isComplete = playDirection === 1 ? isActive && elapsed >= duration : isActive && elapsed <= 0;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            var isStepTaken = false;\n            if (loop && loopCount < loop) {\n                elapsed = 0;\n                loopCount++;\n                isStepTaken = true;\n            } else if (flip && flipCount < flip) {\n                elapsed = duration - elapsed;\n                _a = [to, from], from = _a[0], to = _a[1];\n                playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n                flipCount++;\n                isStepTaken = true;\n            } else if (yoyo && yoyoCount < yoyo) {\n                reverseTween();\n                yoyoCount++;\n                isStepTaken = true;\n            }\n            return !isStepTaken;\n        };\n        var updateTween = function () {\n            progress = clampProgress(getProgressFromValue(0, duration, elapsed));\n            playhead.seek(progress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta * playDirection;\n                updateTween();\n                if (isTweenComplete() && complete) {\n                    cancelSync.update(process);\n                    sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration)(elapsed);\n            },\n            getProgress: function () {\n                return progress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = getValueFromProgress(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseTween();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = getProgressFromValue(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += speedPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * speedPerFrame(springStrength, elapsed);\n            }\n            current += speedPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = speedPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(getValueFromProgress(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return styler(element, props);\n};\nvar svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return styler(element, props);\n};\n\nexport { action, multicast, value, vectorDecay as decay, keyframes, frame as everyFrame, vectorPhysics as physics, vectorSpring as spring, timeline, tween, listen, index as pointer, mouse, multitouch, chain, composite, crossfade, delay, merge, parallel$1 as parallel, schedule, stagger, calc, transformers as transform, css, svg, Action, ValueReaction };\n","import { styler, value, listen, pointer, spring } from \"popmotion\";\n\nconst ball = document.querySelector(\".box\");\nconst divStyler = styler(ball);\nconst ballXY = value({ x: 0, y: 0 }, divStyler.set);\n\nlisten(ball, \"mousedown touchstart\").start(e => {\n  e.preventDefault();\n  pointer(ballXY.get()).start(ballXY);\n});\n\nlisten(document, \"mouseup\").start(() => {\n  spring({\n    from: ballXY.get(),\n    velocity: ballXY.getVelocity(),\n    to: { x: 0, y: 0 },\n    stiffness: 200\n  }).start(ballXY);\n});\n"]}